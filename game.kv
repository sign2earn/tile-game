# game.kv â€” UI layout for the game
#:kivy 2.3.0

<GameBoard>:
    score_label: score_lbl
    time_label: time_lbl
    level_label: level_lbl
    undo_btn: undo_btn
    reset_btn: reset_btn
    overlay_box: overlay
    overlay_label: overlay_lbl
    overlay_action_btn: overlay_btn

    # Top HUD: score, time, level
    Label:
        id: score_lbl
        text: "Score: 0"
        size_hint: None, None
        size: 180, 40
        pos: 60, root.height - 50
        bold: True
        color: 1,0,0,1

    Label:
        id: time_lbl
        text: "Time: 03:00"
        size_hint: None, None
        size: 180, 40
        pos: root.width - 220, root.height - 50
        color: 1,1,1,1

    Label:
        id: level_lbl
        text: "Level: 1"
        size_hint: None, None
        size: 160, 40
        pos: root.width/2 - 60, root.height - 50
        color: 1,1,0,1

    # Hold bar boxes (visual slots)
    canvas:
        Color:
            rgba: 0.86, 0.86, 0.86, 1
        # 7 slots
        Rectangle:
            pos: 150, 80
            size: 60, 60
        Rectangle:
            pos: 150 + (60+10)*1, 80
            size: 60, 60
        Rectangle:
            pos: 150 + (60+10)*2, 80
            size: 60, 60
        Rectangle:
            pos: 150 + (60+10)*3, 80
            size: 60, 60
        Rectangle:
            pos: 150 + (60+10)*4, 80
            size: 60, 60
        Rectangle:
            pos: 150 + (60+10)*5, 80
            size: 60, 60
        Rectangle:
            pos: 150 + (60+10)*6, 80
            size: 60, 60
        Color:
            rgba: 0,0,0,1
        Line:
            rectangle: 150, 80, 60, 60
            width: 1.2
        Line:
            rectangle: 150 + (60+10)*1, 80, 60, 60
            width: 1.2
        Line:
            rectangle: 150 + (60+10)*2, 80, 60, 60
            width: 1.2
        Line:
            rectangle: 150 + (60+10)*3, 80, 60, 60
            width: 1.2
        Line:
            rectangle: 150 + (60+10)*4, 80, 60, 60
            width: 1.2
        Line:
            rectangle: 150 + (60+10)*5, 80, 60, 60
            width: 1.2
        Line:
            rectangle: 150 + (60+10)*6, 80, 60, 60
            width: 1.2

    # Bottom buttons
    Button:
        id: undo_btn
        text: "Undo"
        size_hint: None, None
        size: 100, 45
        pos: 20, 20
        on_release: root.do_undo()

    Button:
        id: reset_btn
        text: "Reset"
        size_hint: None, None
        size: 100, 45
        pos: 140, 20
        on_release: root.do_reset()

    # Overlay (victory / loss)
    FloatLayout:
        id: overlay
        size_hint: None, None
        size: root.size
        pos: 0, 0
        opacity: 0
        canvas:
            Color:
                rgba: 0,0,0,0.35
            Rectangle:
                pos: self.pos
                size: self.size
        Label:
            id: overlay_lbl
            text: ""
            font_size: 32
            size_hint: None, None
            size: 260, 60
            pos_hint: {"center_x": .5, "center_y": .55}
            color: 1,1,1,1
        Button:
            id: overlay_btn
            text: ""
            size_hint: None, None
            size: 200, 50
            pos_hint: {"center_x": .5, "center_y": .45}
            on_release: root.do_overlay_action()
